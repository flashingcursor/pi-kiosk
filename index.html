<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pi Media Hub</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      background: #000;
      color:#fff;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      overflow:hidden;
      height:100vh;
      position:relative;
      display:flex;
      justify-content:center;
      align-items:center;
      cursor: none;
    }
    body.show-cursor { cursor: default; }
    canvas { position:absolute; top:0; left:0; width:100%; height:100%; z-index:-2; }
    canvas.low-perf { display: none; }

    .container {
      display:flex;
      flex-direction:column;
      gap:32px;
      width:90vw;
      max-width:720px;
      z-index:2;
    }
    .item {
      display:flex;
      align-items:center;
      justify-content:center;
      gap:28px;
      font-size:2.9rem;
      font-weight:600;
      cursor:pointer;
      transition:all 0.3s ease;
      opacity:0.30;
      padding:20px 0;
    }
    .item img {
      height:62px;
      width:auto;
      transition:opacity 0.3s ease;
      filter: brightness(1.3);
    }
    .item:hover, .item:focus {
      opacity:1.00;
      outline:none;
    }
    .item.selected {
      opacity:1.00;
    }

    /* Settings Button - Top Right */
    #settingsBtn {
      position:absolute;
      top:40px;
      right:40px;
      width:64px;
      height:64px;
      display:flex;
      align-items:center;
      justify-content:center;
      background:rgba(100, 100, 255, 0.15);
      border:2px solid rgba(100, 100, 255, 0.5);
      border-radius:50%;
      cursor:pointer;
      transition:all 0.3s ease;
      opacity:0.4;
      z-index:3;
    }
    #settingsBtn:hover, #settingsBtn:focus {
      opacity:1;
      background:rgba(100, 100, 255, 0.3);
      transform:scale(1.1) rotate(90deg);
      outline:none;
    }
    #settingsBtn.selected {
      opacity:1;
      background:rgba(100, 100, 255, 0.3);
    }
    #settingsBtn svg {
      width:36px;
      height:36px;
      fill:#6666ff;
      transition:transform 0.3s ease;
    }

    /* Exit Button - Bottom Right */
    #exitBtn {
      position:absolute;
      bottom:40px;
      right:40px;
      display:flex;
      align-items:center;
      gap:12px;
      font-size:1.8rem;
      font-weight:600;
      padding:16px 24px;
      background:rgba(255, 50, 50, 0.2);
      border:2px solid #ff4444;
      border-radius:16px;
      cursor:pointer;
      transition:all 0.3s ease;
      opacity:0.4;
      z-index:3;
    }
    #exitBtn:hover, #exitBtn:focus {
      opacity:1;
      background:rgba(255, 50, 50, 0.4);
      transform:scale(1.05);
      outline:none;
    }
    #exitBtn.selected {
      opacity:1;
      background:rgba(255, 50, 50, 0.4);
    }
    #exitBtn svg {
      width:32px; height:32px; fill:#ff4444;
    }

    /* Settings Screen */
    #settingsScreen {
      position:absolute;
      top:0; left:0;
      width:100%; height:100%;
      background:rgba(0,0,0,0.95);
      z-index:20;
      opacity:0;
      pointer-events:none;
      transition:opacity 0.4s ease;
      overflow-y:auto;
      padding:60px 80px;
    }
    #settingsScreen.active {
      opacity:1;
      pointer-events:all;
    }
    .settings-header {
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:40px;
    }
    .settings-title {
      font-size:3.5rem;
      font-weight:700;
      display:flex;
      align-items:center;
      gap:20px;
    }
    .settings-title svg {
      width:48px; height:48px;
      fill:#6666ff;
    }
    .settings-close {
      font-size:2rem;
      padding:12px 32px;
      background:rgba(255,255,255,0.1);
      border:2px solid rgba(255,255,255,0.3);
      border-radius:12px;
      cursor:pointer;
      transition:all 0.3s ease;
    }
    .settings-close:hover, .settings-close:focus {
      background:rgba(255,255,255,0.2);
      transform:scale(1.05);
      outline:none;
    }

    /* Settings Grid */
    .settings-grid {
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(420px, 1fr));
      gap:30px;
      margin-bottom:40px;
    }
    .setting-card {
      background:rgba(255,255,255,0.05);
      border:2px solid rgba(255,255,255,0.1);
      border-radius:20px;
      padding:32px;
      transition:all 0.3s ease;
    }
    .setting-card:hover, .setting-card:focus-within {
      background:rgba(255,255,255,0.08);
      border-color:rgba(100,100,255,0.5);
      transform:translateY(-4px);
    }
    .setting-label {
      font-size:1.8rem;
      font-weight:600;
      margin-bottom:12px;
      color:#aaf;
    }
    .setting-desc {
      font-size:1.3rem;
      opacity:0.7;
      margin-bottom:20px;
      line-height:1.5;
    }
    .setting-control {
      display:flex;
      gap:12px;
      flex-wrap:wrap;
    }

    /* Toggle Switch */
    .toggle {
      position:relative;
      width:80px;
      height:40px;
      background:rgba(255,255,255,0.2);
      border-radius:20px;
      cursor:pointer;
      transition:all 0.3s ease;
      border:2px solid rgba(255,255,255,0.3);
    }
    .toggle.on {
      background:#00ff88;
      border-color:#00ff88;
    }
    .toggle-knob {
      position:absolute;
      top:4px;
      left:4px;
      width:28px;
      height:28px;
      background:#fff;
      border-radius:50%;
      transition:all 0.3s ease;
      box-shadow:0 2px 8px rgba(0,0,0,0.3);
    }
    .toggle.on .toggle-knob {
      left:44px;
    }
    .toggle:focus {
      outline:none;
      box-shadow:0 0 0 3px rgba(100,100,255,0.5);
    }

    /* Select Buttons */
    .select-btn {
      padding:12px 24px;
      font-size:1.5rem;
      background:rgba(255,255,255,0.1);
      border:2px solid rgba(255,255,255,0.3);
      border-radius:12px;
      cursor:pointer;
      transition:all 0.3s ease;
      color:#fff;
    }
    .select-btn:hover, .select-btn:focus {
      background:rgba(255,255,255,0.15);
      transform:translateY(-2px);
      outline:none;
    }
    .select-btn.active {
      background:#6666ff;
      border-color:#6666ff;
      color:#fff;
    }

    /* Text Input */
    .text-input {
      width:100%;
      padding:14px 20px;
      font-size:1.6rem;
      background:rgba(255,255,255,0.1);
      border:2px solid rgba(255,255,255,0.3);
      border-radius:12px;
      color:#fff;
      font-family:inherit;
      transition:all 0.3s ease;
    }
    .text-input:focus {
      outline:none;
      background:rgba(255,255,255,0.15);
      border-color:#6666ff;
      box-shadow:0 0 0 3px rgba(100,100,255,0.3);
    }
    .text-input::placeholder {
      color:rgba(255,255,255,0.5);
    }

    /* Save Bar */
    .settings-save-bar {
      position:sticky;
      bottom:0;
      left:0;
      right:0;
      background:rgba(0,0,0,0.9);
      border-top:2px solid rgba(100,100,255,0.5);
      padding:24px 80px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin:-60px -80px 0;
    }
    .save-status {
      font-size:1.6rem;
      opacity:0.8;
    }
    .save-buttons {
      display:flex;
      gap:20px;
    }
    .save-btn {
      padding:16px 48px;
      font-size:1.8rem;
      font-weight:600;
      border-radius:12px;
      cursor:pointer;
      transition:all 0.3s ease;
      border:2px solid;
    }
    .save-btn.primary {
      background:#00ff88;
      border-color:#00ff88;
      color:#000;
    }
    .save-btn.secondary {
      background:transparent;
      border-color:rgba(255,255,255,0.5);
      color:#fff;
    }
    .save-btn:hover, .save-btn:focus {
      transform:scale(1.05);
      outline:none;
    }
    .save-btn.primary:hover {
      background:#00dd77;
    }
    .save-btn.secondary:hover {
      background:rgba(255,255,255,0.1);
    }

    /* Confirmation Dialog */
    #confirmDialog {
      position:absolute;
      top:50%; left:50%;
      transform:translate(-50%, -50%);
      background:rgba(15,15,25,0.98);
      border:3px solid #00aaff;
      border-radius:24px;
      padding:40px 60px;
      text-align:center;
      z-index:25;
      opacity:0;
      pointer-events:none;
      transition:opacity 0.4s ease, transform 0.4s ease;
      box-shadow:0 0 60px rgba(0,170,255,0.6);
      backdrop-filter:blur(12px);
      width:80vw;
      max-width:600px;
    }
    #confirmDialog.active {
      opacity:1;
      pointer-events:all;
      transform:translate(-50%, -50%) scale(1.05);
    }
    #dialogLogo {
      width:120px;
      height:120px;
      margin-bottom:20px;
      filter:drop-shadow(0 0 20px #00aaff);
      object-fit: contain;
    }
    #dialogDesc {
      font-size:1.6rem;
      margin-bottom:30px;
      opacity:0.9;
    }
    #confirmDialog .btns {
      display:flex;
      justify-content:center;
      gap:30px;
    }
    #confirmDialog .btn {
      padding:14px 36px;
      font-size:1.5rem;
      font-weight:600;
      border-radius:16px;
      cursor:pointer;
      transition:all 0.3s ease;
    }
    #confirmDialog .btn.confirm {
      background:#00ff88;
      color:#000;
      border:2px solid #00ff88;
    }
    #confirmDialog .btn.cancel {
      background:transparent;
      color:#ff6666;
      border:2px solid #ff6666;
    }
    #confirmDialog .btn:hover {
      transform:scale(1.1);
    }

    /* White Flash */
    #whiteFlash {
      position:absolute;
      top:0; left:0;
      width:100%; height:100%;
      background:#fff;
      opacity:0;
      z-index:30;
      pointer-events:none;
      transition: opacity 0.8s ease-out;
    }

    /* Transparent logo overlay */
    .overlay {
      position:absolute;
      top:50%; left:50%;
      transform:translate(-50%,-50%);
      width:72vw;
      max-width:960px;
      opacity:0;
      pointer-events:none;
      transition:opacity 0.4s ease;
      z-index:-1;
    }
    .overlay img {
      width:100%;
      object-fit: contain;
    }
    .overlay.active { opacity:0.05; }

    /* Offline Overlay */
    #offlineScreen {
      position:absolute;
      top:0; left:0;
      width:100%; height:100%;
      background:rgba(0,0,0,0.92);
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      z-index:10;
      opacity:0;
      pointer-events:none;
      transition:opacity 0.6s ease;
      text-align:center;
      padding:40px;
      font-size:2.2rem;
      line-height:1.6;
    }
    #offlineScreen.active {
      opacity:1;
      pointer-events:all;
    }
    #offlineScreen h1 {
      font-size:4rem;
      margin-bottom:20px;
      color:#ff4444;
    }
    #offlineScreen p {
      max-width:800px;
      opacity:0.9;
      margin-bottom: 10px;
    }

    /* Loading Indicator */
    #loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2rem;
      opacity: 0.7;
      z-index: 1;
    }
    #loading.hidden { display: none; }

    /* Toast Notification */
    .toast {
      position:fixed;
      bottom:100px;
      left:50%;
      transform:translateX(-50%) translateY(200px);
      background:rgba(0,255,136,0.95);
      color:#000;
      padding:20px 40px;
      border-radius:12px;
      font-size:1.8rem;
      font-weight:600;
      z-index:100;
      transition:all 0.4s ease;
      box-shadow:0 8px 24px rgba(0,0,0,0.5);
    }
    .toast.show {
      transform:translateX(-50%) translateY(0);
    }
    .toast.error {
      background:rgba(255,68,68,0.95);
      color:#fff;
    }
  </style>
</head>
<body>
  <canvas id="orbCanvas"></canvas>
  <div id="whiteFlash"></div>
  <div id="loading">Loading...</div>

  <!-- Offline Screen -->
  <div id="offlineScreen">
    <h1>Network Offline</h1>
    <p>The media hub requires an internet connection to stream content.</p>
    <p>Please check your WiFi or Ethernet connection and try again.</p>
  </div>

  <!-- Confirmation Dialog -->
  <div id="confirmDialog">
    <img id="dialogLogo" src="" alt="">
    <p id="dialogDesc">This will open in full screen.</p>
    <div class="btns">
      <div class="btn confirm" tabindex="1">Confirm</div>
      <div class="btn cancel" tabindex="2">Cancel</div>
    </div>
  </div>

  <!-- Settings Button -->
  <div id="settingsBtn" tabindex="998">
    <svg viewBox="0 0 24 24">
      <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
    </svg>
  </div>

  <!-- Settings Screen -->
  <div id="settingsScreen">
    <div class="settings-header">
      <div class="settings-title">
        <svg viewBox="0 0 24 24">
          <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
        </svg>
        Settings
      </div>
      <button class="settings-close" id="settingsCloseBtn">Close</button>
    </div>

    <div class="settings-grid" id="settingsGrid">
      <!-- Settings will be populated dynamically -->
    </div>

    <div class="settings-save-bar">
      <div class="save-status" id="saveStatus">Modified settings will be saved</div>
      <div class="save-buttons">
        <button class="save-btn secondary" id="cancelBtn">Cancel</button>
        <button class="save-btn primary" id="saveBtn">Save Changes</button>
      </div>
    </div>
  </div>

  <!-- Overlays (populated dynamically) -->
  <div id="overlays"></div>

  <!-- Main Menu (populated dynamically) -->
  <div class="container" id="appContainer"></div>

  <!-- Settings Button -->
  <div id="settingsBtn" tabindex="998">
    <svg viewBox="0 0 24 24"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>
  </div>

  <!-- Exit Button -->
  <div id="exitBtn" tabindex="999">
    <svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
    Exit
  </div>

  <script src="settings.js"></script>
</invoke>
